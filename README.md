# Поиск отелей в Telegram

Бот @YourHotelHelperBot позволяет подбирать отели прямо в мессенджере Telegram по различным критериям поиска.

## Особенности

Данный бот позволяет:
* подбирать отели по самой низкой или высокой цене;
* подбирать отели по лучшему соотношению цена/расстояние от центра города;  
* задавать количество выводимых отелей;  
* задавать диапазон цен;
* задавать количество выводимых фотографий;
* бот не использует и не запрашивает никакие персональные данные.

## Requirements

* Python 3.7+
* [pyTelegramBotAPI](https://github.com/python-telegram-bot/python-telegram-bot) – Python Telegram Bot API
* [requests](https://github.com/psf/requests) - библиотека requests
* [python-dotenv](https://pypi.org/project/python-dotenv/) - библиотека для создания виртуального окружения
* [peewee](http://docs.peewee-orm.com/en/latest/) - ORM для работы с SQL базами данных
* [datetime](https://github.com/python/cpython/blob/3.10/Lib/datetime.py) - библиотека для работы с датами и временем

Вы можете установить все зависимости, выполнив следующую команду: `pip install -r requirements.txt`

## Логирование

В скрипте этого бота используется модуль [logging](https://docs.python.org/3/library/logging.html#module-logging) конфигурации `basicConfig` для логирования.

## Команды бота

* `/helloworld` - приветствие
* `/help` - список команд и их описание
* `/lowprice` - топ дешевых отелей
* `/highprice` - топ дорогих отелей
* `/bestdeal` - лучшие предложения
* `/history`- история поиска 

## Как работать с ботом YourHotelHelperBot

Список всех команд, поддерживаемых ботом, можно посмотреть по команде `/help`
В качестве дат заселения и выселения из отеля устанавливаются текущий (то есть сегодняшний) и следующий (завтрашний) дни. 
Далее приведена инструкция по работе с ботом. При ошибочном вводе бот выведет соответствующее сообщение и попросит ввести значение повторно.

### Топ дешевых отелей

1. Введите команду `/lowprice`. Бот запросит город, в котором вы хотите искать отели.
2. Бот запросит дату заезда и выезда. Выберите с помощью календаря.
3. Введите название населенного пункта. Бот выполнит запрос к rapidAPI и выведет список локаций, названия которых похожи на введенный город. 
   Если бот не найдет ни одну локацию, то необходимо ввести название города еще раз, возможно вы допустили ошибку при написании. 
4. Выберите один из предложенных вариантов, наиболее подходящих вашему запросу.
5. Бот запросит количество отелей, которые вы хотите вывести в качестве результата. Введите количество отелей.
6. Бот запросит количество фотографий, которые вы хотите вывести для каждого отеля. Введите количество фотографий.
7. Бот просуммирует информацию, которую вы ввели и спросит, всё ли правильно. Нажмите "да", чтобы начать поиск. Нажмите "нет", чтобы сбросить весь прогресс.
8. Бот выполнит следующий запрос к rapidAPI и выведет отели с указанием названия, цены за ночь, общей цены, адреса, расстояния от центра.
9. Для каждого отеля бот выполнит запрос к rapidAPI для вывода фотографий.

### Топ дорогих отелей

1. Для получения списка самых дорогих отелей введите команду `/highprice`и выполните пункты 2 - 9 из инструкции выше для топа дешевых отелей.

### Лучшие предложения

1. Введите команду `/bestdeal`. Бот запросит город, в котором вы хотите искать отели.
2. Бот запросит дату заезда и выезда. Выберите с помощью календаря.
3. Введите название населенного пункта. Бот выполнит запрос к rapidAPI и выведет список локаций, названия которых похожи на введенный город. 
   Если бот не найдет ни одну локацию, то необходимо ввести название города еще раз, возможно вы допустили ошибку при написании.
4. Выберите один из предложенных вариантов, наиболее подходящих вашему запросу.
5. Бот запросит диапазон цен на отели. Введите минимальную стоимость, затем максимальную стоимость. 
6. Бот запросит диапазон расстояний от центра города до отеля. Введите минимальное расстояние, затем максимальное.
7. Бот запросит количество отелей, которые вы хотите вывести в качестве результата. Введите количество отелей.
8. Бот запросит количество фотографий, которые вы хотите вывести для каждого отеля. Введите количество фотографий.
9. Бот просуммирует информацию, которую вы ввели и спросит, всё ли правильно. Нажмите "да", чтобы начать поиск. Нажмите "нет", чтобы сбросить весь прогресс.
10. Бот выполнит следующий запрос к rapidAPI и выведет отели с указанием названия, цены за ночь, общей цены, адреса, расстояния от центра.
11. Для каждого отеля бот выполнит запрос к rapidAPI для вывода фотографий.

### Рекомендации 

Название города должно состоять только из букв русского или английского алфавита и символа дефис.
Цены представляют собой целые положительные числа либо вещественные положительные числа (через точку).
Расстояния от центра города представляют собой ноль, целые положительные числа или вещественные положительные числа (через точку).
Максимальное расстояние от центра города должно быть написано в виде положительного целого или вещественного числа.
Количество выводимых отелей — целое положительное число. Максимальное возможное количество - 25, при вводе числа больше 25, нужно ввести заново.
Количество выводимых фотографий — целое положительное число. Максимальное возможное количество - 20, при вводе числа больше 20, нужно ввести заново.